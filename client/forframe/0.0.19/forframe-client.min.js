var forFrame=function(){var e=document.getElementById("ff")||document.body,a={addDisp:function(e){var a={};(e=e||{}).type=e.type||"graphics",e.id=e.id||"disp"+this.obj.length,e.forFrame=e.forFrame||function(){},"graphics"===e.type&&(a.disp=this.game.add.graphics(0,0)),"text"===e.type&&(e.text=e.text||"hello world",e.style=e.style||{fill:"red"},a.disp=this.game.add.text(0,0,e.text,e.style)),a.id=e.id,a.type=e.type,a.forFrame=e.forFrame,this.obj.push(a)}},t={get:function(e){return _.find(this.obj,{id:e})},segment:function(e,a){var t,r,i;e=e||.25,a=a||function(){},t=this.maxFrame*e,i=(r=this.frame%t)/t,a.call(_.merge({},this,{seg:{frame:Math.floor(r),maxFrame:Math.floor(t),per:i,bias:1-Math.abs(.5-i)/.5}}))},range:function(e){var a,t,r;(e=e||{}).start=e.start||0,e.end=e.end||1,e.forFrame=e.forFrame||function(){},a=this.maxFrame*(e.end-e.start),r=(t=this.frame%a)/a,this.per>=e.start&&this.per<=e.end&&e.forFrame.call(_.merge({},this,{seg:{frame:Math.floor(t),maxFrame:Math.floor(a),per:r,bias:1-Math.abs(.5-r)/.5}}))}},r=function(e){e.frame+=1,e.frame>=e.maxFrame&&(e.frame=0)};return function(i){i.frame=0,i.maxFrame=i.maxFrame||50,i.per=0,i.bias=0,i.obj=[],i.play=!0,i.width=i.width||320,i.height=i.height||240,i.name=i.name||"untitled",i.init=i.init||function(){},i.forFrame=i.forFrame||function(){},i.game=new Phaser.Game(i.width,i.height+50,Phaser.AUTO,e,{create:function(){i.init.call(_.merge(i,a)),i.game.scale.compatibility.scrollTo=!1;var e=this.game.add.graphics(0,i.height);e.beginFill(65280),e.drawRect(0,0,50,50),e.endFill(),e.inputEnabled=!0,e.events.onInputDown.add(function(){var e;(e=i).play=!e.play});var t=this.game.add.graphics(0,i.height);t.beginFill(255),t.drawRect(50,0,50,50),t.endFill(),t.inputEnabled=!0,t.events.onInputDown.add(function(){r(i)})},update:function(){i.per=i.frame/i.maxFrame,i.bias=1-Math.abs(.5-i.per)/.5,i.forFrame.call(_.merge({},i,t));for(var e=0,a=i.obj.length;e<a;)i.obj[e].forFrame.call(_.merge({},i,t,{obj:i.obj[e],disp:i.obj[e].disp})),e+=1;i.play&&r(i)}},!0)}}();